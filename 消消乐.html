
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å•è¯è¶£å‘³æ¶ˆæ¶ˆä¹ - å¯¹æˆ˜æ¨¡å¼</title>
    <style>
        :root {
            --main-bg: #FFF5F5;
            --container-bg: #FFFFFF;
            --accent: #FFB3C6;
            --text: #66462C;
        }

        body {
            background: var(--main-bg);
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: å¾®è½¯é›…é»‘, sans-serif;
        }

        .game-container {
            background: var(--container-bg);
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            border: 3px solid var(--accent);
            width: 90%;
            max-width: 1200px;
        }

        .header {
            text-align: center;
            margin-bottom: 25px;
        }

        .title {
            font-size: 3.5em; /* è°ƒå¤§æ ‡é¢˜å­—ä½“ */
            color: var(--text);
            margin: 0 0 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 25px;
        }

        .difficulty-btn {
            font-size: 1.5em; /* è°ƒå¤§æŒ‰é’®å­—ä½“ */
            padding: 15px 35px; /* è°ƒå¤§æŒ‰é’®å†…è¾¹è· */
            border-radius: 25px;
            background: var(--accent);
            color: white;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .difficulty-btn.active {
            background: #FF759F;
            transform: scale(1.05);
        }

        #timer {
            text-align: center;
            font-size: 2em; /* è°ƒå¤§è®¡æ—¶å™¨å­—ä½“ */
            color: var(--text);
            margin: 15px 0;
        }

        .game-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 20px 0;
        }

        .column {
            background: #FFF0F0;
            border-radius: 20px;
            padding: 20px;
            min-height: 300px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            align-content: flex-start;
        }

        .card {
            font-size: 2em; /* è°ƒå¤§å¡ç‰‡å­—ä½“ */
            color: var(--text);
            background: white;
            border-radius: 15px;
            padding: 15px 30px; /* è°ƒå¤§å¡ç‰‡å†…è¾¹è· */
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            user-select: none;
            animation: cardAppear 0.3s ease-out;
        }

        @keyframes cardAppear {
            0% { transform: scale(0); }
            100% { transform: scale(1); }
        }

        .card.selected {
            transform: scale(0.95);
            background: #FFF5F5;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }

        .card.matched {
            animation: popOut 0.4s forwards;
        }

        @keyframes popOut {
            0% { transform: scale(1); opacity: 1 }
            100% { transform: scale(0); opacity: 0 }
        }

        .victory-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .victory-card {
            background: white;
            padding: 50px 80px; /* è°ƒå¤§å¼¹çª—å†…è¾¹è· */
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: scaleIn 0.3s ease-out;
        }

        @keyframes scaleIn {
            0% { transform: scale(0); }
            100% { transform: scale(1); }
        }

        .pk-title {
            font-size: 3em; /* è°ƒå¤§PKæ ‡é¢˜å­—ä½“ */
            color: var(--text);
            text-align: center;
            margin: 20px 0;
        }

        .victory-card h2 {
            font-size: 3em; /* è°ƒå¤§èƒœåˆ©å¼¹çª—æ ‡é¢˜å­—ä½“ */
            color: #FF6B6B;
            margin: 0 0 20px 0;
        }

        .victory-card p {
            font-size: 2em; /* è°ƒå¤§èƒœåˆ©å¼¹çª—å†…å®¹å­—ä½“ */
            color: #666;
        }

        .victory-card button {
            font-size: 1.5em; /* è°ƒå¤§æŒ‰é’®å­—ä½“ */
            margin-top: 20px;
            padding: 15px 40px; /* è°ƒå¤§æŒ‰é’®å†…è¾¹è· */
            background: #FFB3C6;
            border: none;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            transition: 0.2s;
        }

        .victory-card button:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1 class="title">å•è¯è¶£å‘³æ¶ˆæ¶ˆä¹ - å¯¹æˆ˜æ¨¡å¼</h1>
            <div id="timer">æ—¶é—´: ç©å®¶1 - 0ç§’ | ç©å®¶2 - 0ç§’</div>
        </div>

        <div class="controls">
            <button class="difficulty-btn active" data-difficulty="7">é’é“œ</button>
            <button class="difficulty-btn" data-difficulty="14">ç™½é“¶</button>
            <button class="difficulty-btn" data-difficulty="20">é»„é‡‘</button>
        </div>

        <div class="pk-title">æœ€å¼ºç‹è€…PK</div>

        <div class="game-columns">
            <div class="column" id="player1Column"></div>
            <div class="column" id="player2Column"></div>
        </div>
    </div>

    <audio id="clickSound" src="click.mp3"></audio>
    <audio id="errorSound" src="error.mp3"></audio>
    <audio id="successSound" src="success.mp3"></audio>
    <audio id="winSound" src="win.mp3"></audio>

<script>
const WORD_LIST = [
    { eng: 'wealth', cn: 'n. è´¢å¯Œï¼›é’±è´¢' },
{ eng: 'differ', cn: 'vi. æœ‰åŒºåˆ«ï¼›ä¸åŒäº' },
{ eng: 'view', cn: 'n. çœ‹æ³•ï¼›è§‚ç‚¹' },
{ eng: 'following', cn: 'adj. ä¸‹åˆ—çš„' },
{ eng: 'tale', cn: 'n. æ•…äº‹' },
{ eng: 'wise', cn: 'adj. èªæ˜çš„ï¼›æœ‰æ™ºæ…§çš„' },
{ eng: 'recognize', cn: 'vt. è®¤è¯†ï¼›ï¼ˆè¾¨ï¼‰è®¤å‡º' },
{ eng: 'sympathy', cn: 'n. åŒæƒ…ï¼›åŒæƒ…å¿ƒ' },
{ eng: 'exactly', cn: 'adv. ç¡®åˆ‡åœ°ï¼›å‡†ç¡®åœ°' },
{ eng: 'invite', cn: 'vt. é‚€è¯·' },
{ eng: 'add', cn: 'vt. è¡¥å……ï¼›ç»§ç»­è¯´' },
{ eng: 'argue', cn: 'v. äº‰è¾©ï¼›äº‰è®º' },
{ eng: 'advice', cn: 'n. åŠå‘Šï¼›å¿ å‘Šï¼›æ„è§' },
{ eng: 'amazed', cn: 'adj. åƒæƒŠçš„ï¼›æƒŠå¼‚çš„' },
{ eng: 'as well', cn: 'ä¹Ÿï¼›åˆ' },
{ eng: 'out of', cn: 'å› ä¸ºï¼›ç”±äºï¼›å‡ºäº' },
{ eng: 'point to', cn: 'æŒ‡å‘' },
{ eng: 'fill...with...', cn: 'æ³¨æ»¡ï¼›å¡«æ»¡' },
{ eng: 'jump in', cn: 'çªç„¶æ’è¯ï¼›æ‰“æ–­åˆ«äººçš„è°ˆè¯' },
{ eng: 'take someone\'s advice', cn: 'æ¥å—æŸäººçš„å»ºè®®ï¼›å¬ä»æŸäººçš„åŠå‘Š' }
];

let gameState = {
    player1: {
        selected: [],
        timer: 0,
        timerId: null,
        isProcessing: false,
        currentDifficulty: 7
    },
    player2: {
        selected: [],
        timer: 0,
        timerId: null,
        isProcessing: false,
        currentDifficulty: 7
    },
    isGameOver: false
};

// æ¸¸æˆåˆå§‹åŒ–
function initGame() {
    clearInterval(gameState.player1.timerId);
    clearInterval(gameState.player2.timerId);
    gameState.player1.timer = 0;
    gameState.player2.timer = 0;
    gameState.player1.selected = [];
    gameState.player2.selected = [];
    gameState.player1.isProcessing = false;
    gameState.player2.isProcessing = false;
    gameState.isGameOver = false;
    updateTimerDisplay();

    const words = prepareWords();
    renderCards(words);
    startTimer();
}

// å‡†å¤‡å•è¯æ•°æ®
function prepareWords() {
    const count = Math.min(gameState.player1.currentDifficulty, WORD_LIST.length);
    const selected = shuffle([...WORD_LIST]).slice(0, count);
    return shuffle([...selected.map(w => ({ ...w, type: 'english' })), ...selected.map(w => ({ ...w, type: 'chinese' }))]);
}

// æ¸²æŸ“å¡ç‰‡
function renderCards(words) {
    const renderColumn = (items, columnId) => {
        const column = document.getElementById(columnId);
        column.innerHTML = items.map(item => `
            <div class="card" 
                 data-word="${item.eng}"
                 data-type="${item.type}"
                 onclick="handleCardClick(this, '${columnId.includes('1') ? 'player1' : 'player2'}')">
                ${item.type === 'english' ? item.eng : item.cn}
            </div>
        `).join('');
    };

    renderColumn(words, 'player1Column');
    renderColumn(words, 'player2Column');
}

// å¤„ç†å¡ç‰‡ç‚¹å‡»
function handleCardClick(card, player) {
    const playerState = gameState[player];
    if (playerState.isProcessing || card.classList.contains('matched')) return;

    playSound('click');
    card.classList.add('selected');
    playerState.selected.push(card);

    if (playerState.selected.length === 2) {
        checkMatch(player);
    }
}

// æ£€æŸ¥åŒ¹é…
function checkMatch(player) {
    const playerState = gameState[player];
    playerState.isProcessing = true;
    const [first, second] = playerState.selected;

    setTimeout(() => {
        if (isValidMatch(first, second)) {
            processSuccess(first, second, player);
        } else {
            processError(first, second, player);
        }
        playerState.selected = [];
        playerState.isProcessing = false;
    }, 500);
}

// éªŒè¯åŒ¹é…æœ‰æ•ˆæ€§
function isValidMatch(card1, card2) {
    return card1.dataset.word === card2.dataset.word &&
           card1.dataset.type !== card2.dataset.type;
}

// å¤„ç†æˆåŠŸåŒ¹é…
function processSuccess(card1, card2, player) {
    playSound('success');
    [card1, card2].forEach(c => {
        c.classList.add('matched');
        setTimeout(() => {
            c.remove();
            checkVictory(player); // æ¯æ¬¡ç§»é™¤åæ£€æŸ¥èƒœåˆ©æ¡ä»¶
        }, 400);
    });
}

// å¤„ç†é”™è¯¯åŒ¹é…
function processError(card1, card2, player) {
    playSound('error');
    [card1, card2].forEach(c => c.classList.remove('selected'));
}

// æ£€æŸ¥èƒœåˆ©æ¡ä»¶
function checkVictory(player) {
    const remaining = document.querySelectorAll(`#${player === 'player1' ? 'player1Column' : 'player2Column'} .card`).length;
    if (remaining === 0) {
        clearInterval(gameState[player].timerId);
        if (!gameState.isGameOver) {
            gameState.isGameOver = true;
            showVictoryModal(player);
        }
    }
}

// æ˜¾ç¤ºèƒœåˆ©å¼¹çª—
function showVictoryModal(player) {
    playSound('win');
    
    const overlay = document.createElement('div');
    overlay.className = 'victory-overlay';
    
    const victoryCard = document.createElement('div');
    victoryCard.className = 'victory-card';
    victoryCard.innerHTML = `
        <h2>ğŸ‰ ${player === 'player1' ? 'ç©å®¶1' : 'ç©å®¶2'} é—¯å…³æˆåŠŸï¼</h2>
        <p>ç”¨æ—¶ï¼š${gameState[player].timer}ç§’<br>éš¾åº¦ï¼š${getDifficultyText()}</p>
        <button onclick="this.parentElement.parentElement.remove(); initGame()">ç»§ç»­æŒ‘æˆ˜</button>
    `;

    overlay.appendChild(victoryCard);
    document.body.appendChild(overlay);

    // æ¯”è¾ƒä¸¤ä¸ªç©å®¶çš„æ—¶é—´
    if (gameState.player1.timer > 0 && gameState.player2.timer > 0) {
        const winner = gameState.player1.timer < gameState.player2.timer ? 'ç©å®¶1' : 'ç©å®¶2';
    }
}

// å…¶ä»–è¾…åŠ©å‡½æ•°
function startTimer() {
    gameState.player1.timerId = setInterval(() => {
        gameState.player1.timer++;
        updateTimerDisplay();
    }, 1000);

    gameState.player2.timerId = setInterval(() => {
        gameState.player2.timer++;
        updateTimerDisplay();
    }, 1000);
}

function updateTimerDisplay() {
    document.getElementById('timer').textContent = `æ—¶é—´: ç©å®¶1 - ${gameState.player1.timer}ç§’ | ç©å®¶2 - ${gameState.player2.timer}ç§’`;
}

function getDifficultyText() {
    const map = {5:'å®¹æ˜“',10:'æ™®é€š',15:'å›°éš¾'};
    return map[gameState.player1.currentDifficulty] || 'æœªçŸ¥';
}

function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
}

function playSound(type) {
    const audio = document.getElementById(`${type}Sound`);
    audio.currentTime = 0;
    audio.play();
}

// äº‹ä»¶ç›‘å¬
document.querySelectorAll('.difficulty-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        document.querySelectorAll('.difficulty-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        gameState.player1.currentDifficulty = parseInt(btn.dataset.difficulty);
        gameState.player2.currentDifficulty = parseInt(btn.dataset.difficulty);
        initGame();
    });
});

// åˆå§‹åŒ–æ¸¸æˆ
initGame();
</script>
</body>
</html>